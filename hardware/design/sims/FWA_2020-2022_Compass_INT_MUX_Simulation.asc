Version 4
SHEET 1 2168 680
WIRE 272 0 272 -16
WIRE 416 0 272 0
WIRE 592 0 496 0
WIRE 688 0 688 -16
WIRE 688 0 592 0
WIRE 816 0 688 0
WIRE 896 0 864 0
WIRE 912 0 896 0
WIRE 1296 0 1296 -48
WIRE 1472 0 1296 0
WIRE 1552 0 1552 -16
WIRE 1552 0 1472 0
WIRE 1696 0 1552 0
WIRE 1776 0 1744 0
WIRE 1792 0 1776 0
WIRE 688 32 688 0
WIRE 816 32 816 0
WIRE 912 32 912 0
WIRE 1552 32 1552 0
WIRE 1696 32 1696 0
WIRE 1792 32 1792 0
WIRE 864 48 864 0
WIRE 1744 48 1744 0
WIRE 272 176 272 0
WIRE -96 192 -96 176
WIRE 272 192 272 176
WIRE 272 192 -96 192
WIRE -96 224 -96 192
WIRE 272 368 272 192
WIRE 416 368 272 368
WIRE 592 368 496 368
WIRE 672 368 672 352
WIRE 672 368 592 368
WIRE 816 368 672 368
WIRE 896 368 864 368
WIRE 912 368 896 368
WIRE 672 400 672 368
WIRE 816 400 816 368
WIRE 912 400 912 368
WIRE 864 416 864 368
FLAG 816 480 0
FLAG 864 464 0
FLAG 912 480 0
FLAG 592 368 MAG_INT
FLAG 816 112 0
FLAG 864 96 0
FLAG 912 112 0
FLAG 592 0 NFC_INT
FLAG 688 112 0
FLAG 688 -96 VCC
FLAG 672 480 0
FLAG 672 272 VCC
FLAG 272 -96 VCC
FLAG -96 304 0
FLAG -96 96 VCC
FLAG 272 176 INT_MUX
FLAG 1120 0 0
FLAG 1120 -80 VCC
FLAG 1120 368 0
FLAG 1120 288 ATTINY_VIL
FLAG 1344 368 0
FLAG 1344 288 ATTINY_VIH
FLAG 1696 112 0
FLAG 1744 96 0
FLAG 1792 112 0
FLAG 1472 0 MAG_DRDY
FLAG 1552 112 0
FLAG 1552 -96 VCC
FLAG 896 368 MAGINT_LOGIC
FLAG 896 0 NFCINT_LOGIC
FLAG 1776 0 MAGDRDY_LOGIC
FLAG 1296 -128 MAG_INT
SYMBOL sw 816 496 R180
SYMATTR InstName S2
SYMATTR Value LS
SYMBOL voltage 912 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(3 0 0.5 1n 1n 1 2 2)
SYMBOL sw 816 128 R180
SYMATTR InstName S4
SYMATTR Value LS
SYMBOL voltage 912 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(3 0 1 1n 1n 1 2 2)
SYMBOL res 672 -112 R0
SYMATTR InstName R1Leak
SYMATTR Value 20Meg
SYMBOL res 672 16 R0
SYMATTR InstName R2Leak
SYMATTR Value 20Meg
SYMBOL res 656 256 R0
SYMATTR InstName R3Leak
SYMATTR Value 20Meg
SYMBOL res 656 384 R0
SYMATTR InstName R4Leak
SYMATTR Value 20Meg
SYMBOL res 256 -112 R0
WINDOW 3 40 60 Left 2
SYMATTR Value {mc(27k,0.01)}
SYMATTR InstName R13
SYMBOL res 512 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value {mc(4.7k,0.012)}
SYMBOL res 512 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value {mc(7.5k,0.012)}
SYMBOL res -112 80 R0
SYMATTR InstName R5Leak
SYMATTR Value 20Meg
SYMBOL res -112 208 R0
SYMATTR InstName R6Leak
SYMATTR Value 20Meg
SYMBOL voltage 1120 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3
SYMBOL bv 1120 272 R0
SYMATTR InstName B1
SYMATTR Value V=V(VCC)*0.3
SYMBOL bv 1344 272 R0
SYMATTR InstName B2
SYMATTR Value V=V(VCC)*0.7
SYMBOL sw 1696 128 R180
SYMATTR InstName S1
SYMATTR Value LS
SYMBOL voltage 1792 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(3 0 0.25 1n 1n 0.5 1.5 4)
SYMBOL res 1536 -112 R0
SYMATTR InstName R1
SYMATTR Value 20Meg
SYMBOL res 1536 16 R0
SYMATTR InstName R2
SYMATTR Value 20Meg
SYMBOL res 1280 -144 R0
SYMATTR InstName R3
SYMATTR Value 1n
TEXT 648 176 Left 2 ;ST25DV04K-IER6S3 GPO Pin
TEXT 696 544 Left 2 ;LIS3MDLTR INT Pin (Is indeed an open-drain)
TEXT -248 -112 Left 2 !.MODEL LS SW(Roff={ROD} Ron=1G Vt=1.5)
TEXT -136 368 Left 2 ;ATTINY414 PA3 Pin
TEXT -88 -32 Left 2 !.tran 0 4 0 0.25
TEXT -88 0 Left 2 !.step param run 1 1000 1
TEXT 568 568 Left 2 ;https://community.st.com/s/question/0D53W000000A79DSAS/lis3mdltr-data-ready-drdy-on-int-pin
TEXT -512 -144 Left 2 ;LS is based upon the ST25DV's worst case GPO VOL characteristics
TEXT -640 464 Left 2 ;Note: All leakage resistors are based upon the I/O leakage characteriestics of each device.
TEXT -80 32 Left 2 !.step param ROD list 50 200 400
RECTANGLE Normal 976 528 656 240 2
RECTANGLE Normal 976 160 656 -128 2
RECTANGLE Normal 192 352 -128 64 2
RECTANGLE Normal 1856 160 1536 -128 2
